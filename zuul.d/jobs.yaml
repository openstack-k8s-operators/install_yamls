---
# Bmaas deployment job with CRC and two bmaas compute nodes.
- job:
    name: install-yamls-crc-podified-edpm-baremetal
    parent: cifmw-crc-podified-edpm-baremetal
    files:
      - ^devsetup/Makefile
      - ^devsetup/edpm/config/*
      - ^devsetup/edpm/services/*
      - ^devsetup/scripts/*
      - ^devsetup/scripts/bmaas/*
      - ^devsetup/scripts/edpm-compute-bmaas.sh
      - ^devsetup/scripts/gen-ansibleee-ssh-key.sh
      - ^scripts/gen-edpm-baremetal-kustomize.sh
      - ^Makefile
    irrelevant-files: &openstack_if
      - .ci-operator.yaml
      - .ansible-lint
      - .gitignore
      - .yamllint
      - .pre-commit-config.yaml
      - LICENSE
      - OWNERS
      - .*/*.md
    vars:
      cifmw_edpm_deploy_baremetal_update_os_containers: true
      cifmw_set_openstack_containers_overrides:
        RELATED_IMAGE_OS_CONTAINER_IMAGE_URL_DEFAULT: "quay.io/steveb/edpm-hardened-uefi:18.0-steveb-20231204"
- job:
    name: content-provider-data-plane-adoption-github-rdo-centos-9-extracted-crc
    parent: data-plane-adoption-github-rdo-centos-9-extracted-crc
    required-projects:
      - openstack-k8s-operators/openstack-operator
    irrelevant-files: *openstack_if

- job:
    name: content-provider-data-plane-adoption-OSP-17-to-extracted-crc
    parent: data-plane-adoption-OSP-17-to-extracted-crc
    required-projects:
      - openstack-k8s-operators/openstack-operator
    irrelevant-files: *openstack_if
